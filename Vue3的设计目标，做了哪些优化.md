#Vue

Vue2面临的问题
- 随着功能的增长，复杂组件的代码变的难以维护
- 缺少一种比较干净的，在多个组件之间提取和复用逻辑的机制
- 类型推断不友好
- 打包的时间太长

Vue3做了哪些改变
- 更小：移除一些不常用API，引入`tree-shaking`，可以仅打包需要的，使得打包体积变小
- 更快：diff算法优化，模板编译优化，事件监听缓存，SSR优化
- TS支持
- API设计一致性
- 提供自身可维护性：CompositionAPI
- 开放更多底层功能

vue3使用monorepo的方式维护，根据功能将不同的模块拆分到packages目录下面不同的子目录中

使得模块拆分更细，职责划分更明确，模块间的依赖关系更加明确
`Vue3`是基于`typeScript`编写的，提供了更好的类型检查，能支持复杂的类型推导

**vue3的性能提升**
- 体积优化
- 编译优化
- 数据劫持优化

在`vue2`中，数据劫持是通过`Object.defineProperty`，这个 API 有一些缺陷，并不能检测对象属性的添加和删除

`vue3`是通过`proxy`监听整个对象，那么对于删除还是监听当然也能监听到

同时`Proxy` 并不能监听到内部深层次的对象变化，而 `Vue3` 的处理方式是在`getter` 中去递归响应式，这样的好处是真正访问到的内部对象才会变成响应式，而不是无脑递归